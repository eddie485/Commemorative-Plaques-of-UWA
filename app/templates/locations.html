{%extends "base.html"%}

{%block head%}
<style>
    .row{
        background-color: #ede7d3;
    }

    #more1{
        display: none;
    }
</style>

{%endblock%}

{%block body%}
    <div class="container-fluid">
        
        <div class="container">
            <div style = "margin: 25px;">
                <h1>LOCATIONS OF INTEREST</h1>
            </div>
            
            <div class="row">
                <div class="col-xs-4 col-md-4"><h1>Winthrop Hall</h1></div>
                <div class="col-xs-7 col-md-7"><p>Some information about Winthrop Hall<span id="dots1">...</span>
                <span id="more1">And even more it turns out because woah so much information</span>
                </p></div>
                <div class="col-xs-1 col-md-1"><button onclick="expandID('1')" id = myBtn1>Read more</button></div>
            </div>

            <div id="empty" onload="loadBlocks()">

            </div>
            
        
        </div>

    </div>
    <script>
        //Function displays more text if requested
        function expandID(id) {
            var dots = document.getElementById("dots" + id);
            var moreText = document.getElementById("more" + id);
            var btnText = document.getElementById("myBtn" + id);

            if (dots.style.display === "none") {
                dots.style.display = "inline";
                btnText.innerHTML = "Read more"; 
                moreText.style.display = "none";
            } else {
                dots.style.display = "none";
                btnText.innerHTML = "Read less"; 
                moreText.style.display = "inline";
            }
        }

        //function creates a block that can display information
        function createBlock(id){
            var empty = document.getElementById('empty')
            var html = 
                '<div class="col-xs-4 col-md-4" id="id"' + id + '><h1 id="title' + id + '"></h1></div> \
                    <div class="col-xs-7 col-md-7"> \
                        <p> <span id = "info' + id + '"></span> \
                            <span id="dots' + id + '">...</span> \
                            <span id="more' + id + '"></span> \
                        </p> \
                    </div> \
                <div class="col-xs-1 col-md-1"> \
                    <button onclick="expandID(' + id +')" id = myBtn' + id + '>Read more</button> \
                </div>'
            empty.className = "row";
            empty.id = '';
            empty.innerHTML = html;
            document.getElementById('info'+id).innerHTML = '';//ADD JSON TO RELEVANT INFO
            document.getElementById('more'+id).innerHTML = '';//ADD JSON TO RELEVANT INFO
            $('<div id="empty"></div>').insertAfter(empty);
        }

        
        
        function loadBlocks(){
            
            let number_of_blocks = 23;
            
            for(let i = 1; i < number_of_blocks+1; i++){
                createBlock(i);
            }
            

        }
        //LOAD THE DIVS WHERE THE INFO WILL GO
        loadBlocks();

        //FILL THEM WITH DATA
        $.getJSON("../static/sites.json",function fillData(sites){
            console.log('inside here');
            fillDiv("Fox Lecture Theatre",sites.Fox_Lecture_Theatre.Description,1);
            fillDiv("Alexander Lecture Theatre",sites.Alexander_Lecture_Theatre.Description,2);
            fillDiv("Murdoch Lecture Theatre",sites.Murdoch_Lecture_Theatre.Description,3);
            fillDiv("Reid Library",sites.Reid_Library.Description,4);
            fillDiv("Ross Lecture Theatre",sites.Ross_Lecture_Theatre.Description,5);
            fillDiv("Weatherburn Lecture Theatre",sites.Weatherburn_Lecture_Theatre,6);
            fillDiv("Irwin St Building",sites.Irwin_St_Building.Description,7);
            fillDiv("James Oval", sites.James_Oval.Description,8);
            fillDiv("Tattersall Lecture Theatre",sites.Tattersall_Lecture_Theatre.Description,9);
            fillDiv("Bayliss Building",sites.Bayliss_Building.Description,10);
            fillDiv("Cameron Hall",sites.Cameron_Hall.Description,11);
            fillDiv("Beasley Law Building",sites.Beasley_Law_Building.Description,12);
            fillDiv("Queen And Duke",sites.Queen_And_Duke.Description,13);
            fillDiv("Arts Building",sites.Arts_Building.Description,14);
            fillDiv("The Charioteer",sites.The_Charioteer.Description,15);
            fillDiv("The Octagon Theatre",sites.The_Octagon_Theatre.Description,16);
            fillDiv("The Black Stump",sites.The_Black_Stump.Description,17);
            fillDiv("Dolphin Theatre",sites.Dolphin_Theatre.Description,18);
            fillDiv("Percy Grainger",sites.Percy_Grainger.Description,19);
            fillDiv("Integrata",sites.Integrata.Description,20);
            fillDiv("Eileen Joyce",sites.Eileen_Joyce.Description,21);
            fillDiv("The Dancer",sites.The_Dancer.Description,22);
            fillDiv("Sundial",sites.Sundial.Description,23);
        })
        
        function fillDiv(title, description,id){
            $('#title'+id).append(title);
            $('#info'+id).append(description);
        }
        
    </script>

{%endblock%}