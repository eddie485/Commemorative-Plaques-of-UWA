{%extends "base.html"%}

{%block head%}
<style>
    .row{
        
        background-color: #ececec;
    }

    .more{
        display: none;
    }

    .header {
        
        padding: 25px; 
        background-color: #e2b600;
    }

    .header h1{
        
        text-align: center;
    }

    .container{
        padding: 10px;
        text-align: center;
    }



    .mybtn {
        cursor: pointer;
        color: azure;
        background-color: #27348b;
        outline: none;
        max-width: 100%;
    }
</style>

{%endblock%}

{%block body%}
    <div class = "header">
        <h1>LOCATIONS OF INTEREST</h1>
    </div>
    <div class="container-fluid" style="background-color: #ececec;">
        
        <div class="container">

            
            <!--
                TEMPLATE
            <div class="row">
                <div class="col-xs-4 col-md-4"><h1>Winthrop Hall</h1></div>
                <div class="col-xs-7 col-md-7"><p>Some information about Winthrop Hall<span id="dots1">...</span>
                <span id="more1">And even more it turns out because woah so much information</span>
                </p></div>
                <div class="col-xs-1 col-md-1"><button onclick="expandID('1')" id = myBtn1>Read more</button></div>
            </div>
            -->
            <div class = "content">
                <div id="empty" onload="loadBlocks()"></div>
            </div>
            
        
        </div>

    </div>
    <script>
        //Function displays more text if requested
        function expandID(id) {
            var dots = document.getElementById("dots" + id);
            var moreText = document.getElementById("more" + id);
            var btnText = document.getElementById("myBtn" + id);

            if (dots.style.display === "none") {
                dots.style.display = "inline";
                btnText.innerHTML = "Read more"; 
                moreText.style.display = "none";
            } else {
                dots.style.display = "none";
                btnText.innerHTML = "Read less"; 
                moreText.style.display = "inline";
            }
        }

        //function creates a block that can display information
        function createBlock(id){
            var empty = document.getElementById('empty');
            var html = 
                '<div class="col-xs-4 col-md-4" id="id"' + id + '><img id="portrait' + id + '" class="portrait" src = {{ url_for("static", filename="images/winthrophall1.jpg")}}></img></div> \
                    <div class="col-xs-7 col-md-7"> \
                        <p> <span id = "info' + id + '"></span> \
                            <span id="dots' + id + '">...</span> \
                            <span id="more' + id + '" class = "more"></span> \
                        </p> \
                    </div> \
                <div class="col-xs-1 col-md-1"> \
                    <button onclick="expandID(' + id +')" id = myBtn' + id + ' class="mybtn">Read more</button> \
                </div>'
            empty.className = "row";
            empty.id = '';
            empty.innerHTML = html;
            $('<div id="empty"></div>').insertAfter(empty);
        }

        
        
        function loadBlocks(){
            
            let number_of_blocks = 23;
            
            for(let i = 1; i < number_of_blocks+1; i++){
                createBlock(i);
            }
            

        }
        //LOAD THE DIVS WHERE THE INFO WILL GO
        loadBlocks();

        //FILL THEM WITH DATA
        $.getJSON("../static/sites.json",function fillData(sites){
            console.log('inside here');
            fillDiv("Fox1.jpg",sites.Fox_Lecture_Theatre.Description,1);
            fillDiv("Alexander Lecture Theatre",sites.Alexander_Lecture_Theatre.Description,2);
            fillDiv("Murdoch Lecture Theatre",sites.Murdoch_Lecture_Theatre.Description,3);
            fillDiv("Reid Library",sites.Reid_Library.Description,4);
            fillDiv("Ross1.jpg",sites.Ross_Lecture_Theatre.Description,5);
            fillDiv("Weatherburn1.jpg",sites.Weatherburn_Lecture_Theatre.Description,6);
            fillDiv("Irwin_Street1.jpg",sites.Irwin_St_Building.Description,7);
            fillDiv("James_Oval1.jpg", sites.James_Oval.Description,8);
            fillDiv("Tattersall1.jpg",sites.Tattersall_Lecture_Theatre.Description,9);
            fillDiv("Bayliss1.jpg",sites.Bayliss_Building.Description,10);
            fillDiv("Cameron_Hall1.jpg",sites.Cameron_Hall.Description,11);
            fillDiv("Beasley1.jpg",sites.Beasley_Law_Building.Description,12);
            fillDiv("Queen_and_Duke1.jpg",sites.Queen_And_Duke.Description,13);
            fillDiv("Arts Building",sites.Arts_Building.Description,14);
            fillDiv("The Charioteer",sites.The_Charioteer.Description,15);
            fillDiv("Octagon1.jpg",sites.The_Octagon_Theatre.Description,16);
            fillDiv("The_Black_Stump1.jpg",sites.The_Black_Stump.Description,17);
            fillDiv("Dolphin_Theatre1.jpg",sites.Dolphin_Theatre.Description,18);
            fillDiv("Percy_Grainger1.jpg",sites.Percy_Grainger.Description,19);
            fillDiv("Sommerville1.jpg",sites.Somerville_Auditorium.Description,20);
            fillDiv("Eileen_Joyce1.jpg",sites.Eileen_Joyce.Description,21);
            fillDiv("The_Dancer_and_Emma1.jpg",sites.The_Dancer_and_Emma.Description,22);
            fillDiv("Sundial",sites.Sundial.Description,23);
        })
        
        function fillDiv(portrait, description,id){
            let CHAR_LIMIT = 150;
            
            let filesource = '/static/images/' + portrait;
            console.log(filesource);
            let my_desc = description.replace("<p>","").replace("</p>","");
            let less = my_desc.slice(0,CHAR_LIMIT);
            let more = my_desc.slice(CHAR_LIMIT);
            $('#portrait'+id).attr("src", filesource);
            $('#info'+id).append(less);
            $('#more' +id).append(more);
        }
        
    </script>

{%endblock%}